!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports,require("axios")):"function"==typeof define&&define.amd?define(["exports","axios"],n):n((e="undefined"!=typeof globalThis?globalThis:e||self).webpackmpplugin={},e.axios)}(this,(function(e,n){"use strict";function o(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var t=o(n),i=function(){function e(e){var n=e.channel,o=e.key;"wecom"==n&&(this.url="".concat("https://qyapi.weixin.qq.com/cgi-bin/webhook/send","?key=").concat(o)),this.config=e}return e.prototype.apply=function(e){var n=this;if(e.hooks&&e.hooks.done)e.hooks.done.tapAsync("WabpackBotNotifyPlugin",(function(e,o){n.pluginDoneFn(e,o)}));else{if(void 0===e.plugin)return;e.plugin("done",(function(e,o){n.pluginDoneFn(e,o)}))}},e.prototype.pluginDoneFn=function(e,n){var o=this.config,t=o.channel,i=o.content;if(t)if(i)if("wecom"==t){var c=i.msgtype,s={msgtype:c};s[c]=i[c],this.sendWecomNotify(s).then((function(e){n()})).catch((function(e){n()}))}else console.warn("不支持当前渠道，请根据文档设置。");else console.warn("未填写通知内容。");else console.warn("未填写通知渠道。")},e.prototype.sendWecomNotify=function(e){var n=this;return new Promise((function(o,i){t.default.post(n.url,e).then((function(e){var n=e.status,t=e.data;if(200==n){var c=t.errcode,s=t.errmsg;0==c?o(t):(console.error(s),i(t))}else i(t)})).catch((function(e){console.error(e),i(e)}))}))},e}();e.WabpackBotNotifyPlugin=i,Object.defineProperty(e,"__esModule",{value:!0})}));
